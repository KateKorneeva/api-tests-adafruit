"use strict";

var _ava = _interopRequireDefault(require("ava"));

var _shortcuts = require("./shortcuts");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_ava.default.before('Delete all feeds', async t => {
  // Authorise
  t.context.api = await (0, _shortcuts.getApi)();
  (0, _shortcuts.auth)(t.context.api); // Delete all existing feeds

  const respFeeds = await t.context.api.get('/feeds');
  t.is(respFeeds.status, 200, (0, _shortcuts.responseErrMessage)(respFeeds));
  const feeds = respFeeds.data;
  let feedKey;

  for (let i in feeds) {
    feedKey = feeds[i].key;
    const respDelete = await t.context.api.delete(`/feeds/${feedKey}`);
    t.is(respDelete.status, 200, (0, _shortcuts.responseErrMessage)(respDelete));
  }
});

(0, _ava.default)('Pretest script finished', async t => {
  t.pass('Pretest script finished');
});
//# sourceMappingURL=/home/kate/moeco/adafruit/node_modules/.cache/ava/6fdbf529079f75a9d45545322161b2a2.js.map